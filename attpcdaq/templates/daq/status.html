{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}Status - AT-TPC DAQ{% endblock %}

{#{% block breadcrumbs %}#}
{#<div class="container">#}
{#    <ol class="breadcrumb">#}
{#        <li class="active">Home</li>#}
{#    </ol>#}
{#</div>#}
{#{% endblock %}#}

{% block body %}


    <div class="panel panel-default">
        <div class="panel-heading">
            DAQ Status
        </div>

        <div class="panel-body">
            <div class="row">
                <div class="col-md-8">
                    <h4>Overall status: <span class="label label-success">Idle</span></h4>
                </div>
                <div class="col-md-4 text-right">
                    <div class="btn-toolbar" id="run-control-toolbar">
                        <a class="btn btn-info {% if system_state >= 3 %}disabled{% endif %}"
                           href="{% url 'daq/set_state_all' 3 %}">
                            <span class="glyphicon glyphicon-off"></span> Init
                        </a>
                        <a class="btn btn-success {% if system_state != 3 %}disabled{% endif %}"
                           href="{% url 'daq/set_state_all' 4 %}">
                            <span class="glyphicon glyphicon-play"></span> Start
                        </a>
                        <a class="btn btn-danger {% if system_state != 4 %}disabled{% endif %}"
                           href="{% url 'daq/set_state_all' 3 %}">
                            <span class="glyphicon glyphicon-stop"></span> Stop
                        </a>
                        <a class="btn btn-warning {% if system_state == 4 or system_state == 0 %}disabled{% endif %}"
                           href="{% url 'daq/set_state_all' 0 %}">
                            <span class="glyphicon glyphicon-repeat"></span> Reset
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <table class="table table-striped">
            <tr>
                <th>Name</th>
                <th>Status</th>
                <th>Config</th>
                <th class="shrink"></th>
            </tr>
            {% for source in data_sources %}
            <tr>
                <td>{{ source.name }}</td>
                <td><span class="label label-default">{{ source.state_name }}</span></td>
                <td>{{ source.config }}</td>
                <td class="text-right">
                    <div class="btn-toolbar" id="run-control-toolbar">
            {#        <div class="btn-group">#}
                        <a class="btn btn-xs btn-info {% if system_state >= 3 %}disabled{% endif %}"
                           href="{% url 'daq/set_state_all' 3 %}">
                            <span class="glyphicon glyphicon-off"></span>
                        </a>
                        <a class="btn btn-xs btn-success {% if system_state != 3 %}disabled{% endif %}"
                           href="{% url 'daq/set_state_all' 4 %}">
                            <span class="glyphicon glyphicon-play"></span>
                        </a>
                        <a class="btn btn-xs btn-danger {% if system_state != 4 %}disabled{% endif %}"
                           href="{% url 'daq/set_state_all' 3 %}">
                            <span class="glyphicon glyphicon-stop"></span>
                        </a>
                        <a class="btn btn-xs btn-warning {% if system_state == 4 or system_state == 0 %}disabled{% endif %}"
                           href="{% url 'daq/set_state_all' 0 %}">
                            <span class="glyphicon glyphicon-repeat"></span>
                        </a>
    {#        </div>#}
        </div>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>


{% endblock %}